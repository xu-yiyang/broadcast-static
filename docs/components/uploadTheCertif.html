<div class="gb-table">
	<div class="taskmsg" id="table-mainfou">
		<div class="tkrange">
			<div class="tklay">
		    	<a class="newtk-btn" id="uploadbtn">上传证书</a>
			</div>
			<div class="tksearch">
				<input type="text" value="请输入用户名、数字证书编码" onfocus="if(this.value==defaultValue){this.value = '';this.style.color='#333'}" onblur="if(!value){this.value = defaultValue;this.style.color='#ccc';}" class="dsearch" aria-controls="table-main"/>
				<span class="tksrh-btn"><i class="iconfont icon-sousuo"></i></span>
			</div>
		</div>
		<div class="thetab">
			<div class="tablecont">
			    <table class="table-main display" cellspacing="0" width="100%">
			        <thead>
				        <tr>
				        	<th></th>
				            <th>序号</th>
				            <th>证书名</th>
				            <th>证书类型</th>
				            <th>上传日期</th>
				            <th>有效期</th>
				            <th>操作</th>
				            <th></th>
				        </tr>
			        </thead>
			        <tfoot>
				        <tr>
				            <th></th>
				            <th></th>
				            <th></th>
				            <th></th>
				            <th></th>
				            <th></th>
				            <th></th>
				            <th></th>
				        </tr>
			        </tfoot>
			         <tbody>
			        	<tr>
			        		<td><div class='checkone'><input type='checkbox' name='checkone' id='check_1' /><label for='check_1'></label></div></td>
			        		<td><span class='tabnumb'>1</span></td>
			        		<td>证书名</td>
			        		<td>用户证书</td>
			        		<td>2016-09-08  18:10:20</td>
			        		<td>2017-09-08  18:10:20</td>
			        		<td><span class="portbtn porusing"><i class='iconfont icon-qiyong'></i>启用</span></td>
			        		<td><span class='del delete'><i class='iconfont icon-shanchu'></i>删除</span></td>
			        	</tr>
			        	<tr>
			        		<td><div class='checkone'><input type='checkbox' name='checkone' id='check_2' /><label for='check_2'></label></div></td>
			        		<td><span class='tabnumb'>2</span></td>
			        		<td>证书名</td>
			        		<td>用户证书</td>
			        		<td>2016-09-08  18:10:20</td>
			        		<td>2017-09-08  18:10:20</td>
			        		<td><span class="portbtn porusing"><i class='iconfont icon-qiyong'></i>启用</span></td>
			        		<td><span class='del delete'><i class='iconfont icon-shanchu'></i>删除</span></td>
			        	</tr>
			        	<tr>
			        		<td><div class='checkone'><input type='checkbox' name='checkone' id='check_3' /><label for='check_3'></label></div></td>
			        		<td><span class='tabnumb'>3</span></td>
			        		<td>证书名</td>
			        		<td>本平台证书</td>
			        		<td>2016-09-08  18:10:20</td>
			        		<td>2017-09-08  18:10:20</td>
			        		<td><span class="portbtn porclose"><i class='iconfont icon-zanting'></i>停用</span></td>
			        		<td><span class='del delete'><i class='iconfont icon-shanchu'></i>删除</span></td>
			        	</tr>
			        	<tr>
			        		<td><div class='checkone'><input type='checkbox' name='checkone' id='check_4' /><label for='check_4'></label></div></td>
			        		<td><span class='tabnumb'>4</span></td>
			        		<td>证书名</td>
			        		<td>其它证书</td>
			        		<td>2016-09-08  18:10:20</td>
			        		<td>2017-09-08  18:10:20</td>
			        		<td><span class="portbtn porclose"><i class='iconfont icon-zanting'></i>停用</span></td>
			        		<td><span class='del delete'><i class='iconfont icon-shanchu'></i>删除</span></td>
			        	</tr>
			        	<tr>
			        		<td><div class='checkone'><input type='checkbox' name='checkone' id='check_5' /><label for='check_5'></label></div></td>
			        		<td><span class='tabnumb'>5</span></td>
			        		<td>证书名</td>
			        		<td>用户证书</td>
			        		<td>2016-09-08  18:10:20</td>
			        		<td>2017-09-08  18:10:20</td>
			        		<td><span class="portbtn porusing"><i class='iconfont icon-qiyong'></i>启用</span></td>
			        		<td><span class='del delete'><i class='iconfont icon-shanchu'></i>删除</span></td>
			        	</tr>
			        </tbody>
			    </table>
			</div>
			<div class="theche">
				<div class="tocheck">
					<input type="checkbox" name="checkall" id="checkAll" />
					<label for="checkAll">全选</label>
				</div>
				<span class="chedel"><i class="iconfont icon-shanchu"></i>删除</span>
			</div>
		</div>
		<p class="botword">© 2017-2018 浙江省应急广播平台</p>
	</div>
	<div class="choose">
		<p class="choword">确定删除此任务消息吗？</p>
		<div class="chobtn">
			<input type="button" value="删除" class="chopri cho-delete" />
			<input type="button" value="取消" class="cho-cancel" />
		</div>
		<span class="triangle"><em></em></span>
	</div>
	<div class="popwindow"></div>
	<div class="upcert">
		<p class="poptit">上传证书</p>
		<span class="popclose"><i class="iconfont icon-guanbi"></i></span>
		<form class="layui-form" action="">
			<div class="uncont">
				<div class="settingone">
					<p class="oneitem-tit"><small>*</small>证书名</p>
					<div class="tnoneimp">
						<input type="text" class="imptxt"/>
					</div>
				</div>
				<div class="settingone">
					<p class="oneitem-tit"><small>*</small>证书类型</p>
					<div class="layui-input-inline">
						<select name="dispatch" lay-search="">
							<option value="">请选择证书类型</option>
							<option value="1">用户证书</option>
							<option value="2">本平台证书</option>
							<option value="3">其它平台证书</option>
							<option value="4">USB证书</option>
						</select>
					</div>
				</div>
				<div class="touploading">
					<input type="file" class="fileup" accept="audio/*,video/*" data-type="loading"  id="fileup"/>
					<input type="button" value="本地文件" class="uplbtn" />
				</div>
				<div class="tomat">
					<div class="layui-progress layui-progress-big" lay-filter="demo"><!--  lay-showpercent="true" -->
					  <div class="layui-progress-bar" lay-percent="0%"></div><!--   layui-bg-red -->
					</div>
					<p class="forword">上传中...</p>
				</div>
				<p class="succmat"><i class="iconfont icon-11"></i>上传成功！</p>
				<div class="upcebtn">
					<input type="button" class="rev-cancel" value="取消" />
					<input type="button" class="revyes" value="确定" />
				</div>
			</div>
		</form>
	</div>
</div>
	

<script type="text/javascript">
	$(document).ready(function(){
		/*table*/
		$(function () {
           var table = $('#table-mainfou table').DataTable({
               "scrollY": "calc(100% - 50px)",
			   "scrollX": true,
               "dom": '<"top"f >rt<"bottom"ilp><"clear">',//dom定位
               "dom": 'tiprl',//自定义显示项
               "lengthMenu":[10, 20, 30, 40, 50],//每页显示条数设置
               "lengthChange": true,//是否允许用户自定义显示数量
               "bPaginate": true, //翻页功能
               "bFilter": true, //列筛序功能
               "searching": true,//本地搜索
               "order": [ 1, "asc" ],//desc降序
               "Info": true,//页脚信息
               "oLanguage": oLanguage,
               "columnDefs": [
               		{
	                   orderable: false,
	                   targets: [0,2,3,4,5,6,7] //禁止排序
	               }
               ],
               fnDrawCallback: function(table) {  
               		jumpPage($("#table-mainfou"))
	           },
               initComplete: function () {//列筛选
                   var api = this.api();
                   api.columns().indexes().flatten().each(function (i) {
                       if (i == 3) {//对第i列进行筛选
                            var column = api.column(i);
 							rowScreen(column);
                       }
                   });
               }
			})
			userDef(table);//table配置--显示数量 搜索 全选 删除 
       })
		$('.portbtn').click(function(){
        	if($(this).hasClass('porclose')){
        		$(this).html("<i class='iconfont icon-qiyong'></i>启用");
	        	$(this).removeClass('porclose').addClass('porusing');
        	}else{
        		$(this).html("<i class='iconfont icon-zanting'></i>停用");
	        	$(this).removeClass('porusing').addClass('porclose');
        	}
        })

		$('#uploadbtn').click(function(){
			$('.popwindow').show();
			$('.upcert').show();
		})

        layui.use(['form', 'element'], function(){
		    var element = layui.element //Tab的切换功能，切换事件监听等，需要依赖element模块
		    ,form = layui.form;
		    form.render();

		    var itbtn = $('<span class="itbtn"></span>');
		    $('.layui-select-title').append(itbtn);
		    $('form .layui-form-radio').remove();

		  
			//触发事件
			var active = {
			    loading: function(othis){
			      var DISABLED = 'layui-btn-disabled';
			      if(othis.hasClass(DISABLED)) return;
			      
			      //模拟loading
			      var n = 0,timer = setInterval(function(){
			        n = n + Math.random()*10|0;  
			        if(n>100){
			          n = 100;
			          clearInterval(timer);
			          othis.removeClass(DISABLED);
			          $('.uncont .tomat').hide();
			          $('.uncont .succmat').show();
			        }
			        element.progress('demo', n+'%');
			      }, 300+Math.random()*1000);
			      
			      othis.addClass(DISABLED);
			    }
			};
		  	

			$('.fileup').change(function(){
				$('.uncont .tomat').show();
				$('.uncont .succmat').hide();
				var othis = $(this), type = $(this).data('type');
				console.log(othis);
				active[type] ? active[type].call(this, othis) : '';
			});
		});
	})
</script>