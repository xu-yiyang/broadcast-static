<div class="gb-form">
	<form class="layui-form" action="">
		<div class="newform newprog">
			<p class="newform-tit"><i class="iconfont icon-bianji1"></i>新建角色</p>
			<div class="form-oneitem">
				<div class="fortit">
					<span class="oneitem-tit">新建角色</span>
				</div>
				<div class="oneitem-cont">
					<div class="progtype">
						<p class="oneitem-tit"><small>*</small>角色名称</p>
						<div class="tnoneimp">
							<input type="text" class="imptxt"/>
							<p class="itemexp" style="color: red;">！角色名称重复</p>
						</div>
					</div>
					<div class="progtype">
						<div class="msgcont">
							<p class="oneitem-tit"><small>*</small>角色说明</p>
							<div class="txtimp">
								<textarea id="imparea" class="imparea" maxlength="200" onfocus="if(this.value == defaultValue){this.value = '';this.style.color = '#333'}" onblur="if(!value){this.value = defaultValue;this.style.color = '#ccc'}">请输入说明</textarea>
								<span class="area-count"><span class="countnew">0</span>/200</span>
							</div>
						</div>
					</div>
					<div class="progtype">
						<p class="oneitem-tit"><small>*</small>角色权限</p>
						<div class="gb-tree scroll gb-tree-noHeight">
							<ul id="gb_tree_all1" class="ztree ztree-check"></ul>
						</div>
					</div>
				</div>
			</div>
			<div class="tocreat">
				<div class="progcreat">
					<input type="button" value="确定新建" class="tocreatbtn" />
				</div>
			</div>
			<p class="botword">© 2017-2018 浙江省应急广播平台</p>
		</div>
		<div class="choose">
			<p class="choword">确定删除此任务消息吗？</p>
			<div class="chobtn">
				<input type="button" value="删除" class="chopri cho-delete" />
				<input type="button" value="取消" class="cho-cancel" />
			</div>
			<span class="triangle"><em></em></span>
		</div>
	</form>
</div>

	



<script type="text/javascript">
	$(document).ready(function(){
		/*layui.use('form', function(){
			var form = layui.form;
			form.render();

			var itbtn = $('<span class="itbtn"></span>');
			$('.layui-select-title').append(itbtn);
			$('.gb-form .layui-form-radio').remove();
			
		});*/
	})

	// zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
	var allSetting = {
		view:{
			showLine:false,//去掉连接线
		},
		check:{//添加复选框
			enable:true,
		},
		callback: {
			onCheck: zTreeOnCheck
		}
	};
	function zTreeOnCheck(event, treeId, treeNode) {
		// 勾选复选框将触发这个方法，在这里调用ajax获取已选数据
	    console.log(treeNode)
		// 	selData=treeNode;//ajax获取的数据赋值给已选数据
	 //    if(treeNode.checked){
		//  //    var treeObj = $.fn.zTree.getZTreeObj("gb_tree_all1");//获取全部数据的树的对象
		// 	// var nodes = treeObj.getChangeCheckedNodes();//获取勾选的数据
	 //    }
		// 	$.fn.zTree.init($(this), selSetting, selData);//初始化已选数据的树
	};
	// zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解）
	// 全部数据
	var allData = [{
	    name: "任务消息管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "新建任务消息",
	    },{
	        name: "编辑任务消息",
	    },{
	        name: "停播任务消息",
	    },{
	        name: "取消播放任务消息",
	    },{
	        name: "审核任务消息",
	    },{
	        name: "查看任务消息",
	    	checked:true,
	    },{
	        name: "重播任务消息",
	    	checked:true,
	    },{
	        name: "删除任务消息",
	    	checked:true,
	    }]
	},{
	    name: "用户管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "新建用户",
	    },{
	        name: "停用/启用用户",
	    },{
	        name: "编辑用户",
	    },{
	        name: "删除用户",
	    }]
	},{
	    name: "资源管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "查看资源",
	    },{
	        name: "编辑资源",
	    },{
	        name: "删除资源",
	    },{
	        name: "新增资源",
	    },{
	        name: "下载音频资源",
	    }]
	}];
	//带复选框的树
	$(".ztree-check").each(function() {
		$.fn.zTree.init($(this), allSetting, allData);
	});
</script>