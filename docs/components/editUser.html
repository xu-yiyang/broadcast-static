<div class="gb-form">
	<form class="layui-form" action="">
		<div class="newform">
			<p class="newform-tit"><i class="iconfont icon-bianji1"></i>新建用户</p>
			<div class="form-oneitem">
				<div class="fortit">
					<p class="oneitem-tit">新建用户</p>
				</div>
				<div class="oneitem-cont">
					<div class="settingone">
						<p class="oneitem-tit"><small>*</small>用户姓名</p>
						<div class="tnoneimp">
							<input type="text" class="imptxt" />
						</div>
					</div>
					<div class="settingone">
						<p class="oneitem-tit"><small>*</small>密码</p>
						<div class="tnoneimp">
							<input type="password" class="imptxt" />
						</div>
					</div>
					<div class="settingone">
						<p class="oneitem-tit"><small>*</small>手机号</p>
						<div class="tnoneimp">
							<input type="text" class="imptxt"  onkeyup="value=value.replace(/[^\d]/g,'')" ng-pattern="/[^a-zA-Z]/" />
						</div>
					</div>
					<div class="settingone">
						<p class="oneitem-tit"><small>*</small>用户所属部分</p>
						<div class="layui-input-inline">
							<select name="dispatch" lay-search="">
								<option value="">请选择用户所属部门</option>
								<option value="1">部门1</option>
								<option value="2">部门2</option>
							</select>
						</div>
					</div>
					<div class="settingone">
						<p class="oneitem-tit"><small>*</small>数字证书可下载次数</p>
						<div class="layui-input-inline">
							<select name="dispatch" lay-search="">
								<option value="">请选择可下载次数</option>
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
							</select>
						</div>
					</div>
					<div class="settingone">
						<p class="oneitem-tit">选择角色或者权限</p>
						<div class="gb-permission-list">
							<div class="gb-watch-list">
								<!-- <div class="matcheck">
									<input type="radio" id="matone1" checked="checked" lay-ignore>
									<label for="matone1"></label>
								</div> -->
								<ul>
									<li>
										<em class="i">自定义权限</em>
										<div class="matcheck">
											<input type="radio" name="permission" id="custom" lay-ignore>
											<label for="custom"></label>
										</div>
									</li>
								</ul>
								<div class="tksearch">
									<input type="text" class="dsearch" placeholder="搜索">
									<span class="tksrh-btn"><i class="iconfont icon-sousuo"></i></span>
								</div>
								<ul class="gb-watch-list-ul scroll">
									<li>
										<em class="i">橙子</em>
										<div class="matcheck">
											<input type="radio" name="permission" id="matone1" checked="checked" lay-ignore>
											<label for="matone1"></label>
										</div>
									</li>
									<li>
										<em class="i">橙子2</em>
										<div class="matcheck">
											<input type="radio" name="permission" id="matone2" lay-ignore>
											<label for="matone2"></label>
										</div>
									</li>
								</ul>
							</div>
							<div class="gb-user-permission">
								<h3>审核员的权限</h3>
								<div class="gb-tree scroll gb-tree-noHeight">
									<ul id="gb_tree_all1" class="ztree ztree-check"></ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="tocreat">
				<div class="progcreat">
					<input type="button" value="确定新建" class="tocreatbtn" />
				</div>
			</div>
			<p class="botword">© 2017-2018 浙江省应急广播平台</p>
		</div>
	</form>
</div>

	



<script type="text/javascript">
	$(document).ready(function(){
		layui.use('form', function(){
			var form = layui.form;
			form.render();

			var itbtn = $('<span class="itbtn"></span>');
			$('.layui-select-title').append(itbtn);
			$('.gb-form .layui-form-radio').remove();
			
		});
	})

	// zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
	var allSetting = {
		view:{
			showLine:false,//去掉连接线
		},
		check:{//添加复选框
			enable:true,
		},
		callback: {
			onCheck: zTreeOnCheck
		}
	};
	function zTreeOnCheck(event, treeId, treeNode) {
		// 勾选复选框将触发这个方法，在这里调用ajax获取已选数据
	    console.log(treeNode)
		// 	selData=treeNode;//ajax获取的数据赋值给已选数据
	 //    if(treeNode.checked){
		//  //    var treeObj = $.fn.zTree.getZTreeObj("gb_tree_all1");//获取全部数据的树的对象
		// 	// var nodes = treeObj.getChangeCheckedNodes();//获取勾选的数据
	 //    }
		// 	$.fn.zTree.init($(this), selSetting, selData);//初始化已选数据的树
	};
	// zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解）
	// 全部数据
	var allData = [{
	    name: "任务消息管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "新建任务消息",
	    },{
	        name: "编辑任务消息",
	    },{
	        name: "停播任务消息",
	    },{
	        name: "取消播放任务消息",
	    },{
	        name: "审核任务消息",
	    },{
	        name: "查看任务消息",
	    	checked:true,
	    },{
	        name: "重播任务消息",
	    	checked:true,
	    },{
	        name: "删除任务消息",
	    	checked:true,
	    }]
	},{
	    name: "用户管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "新建用户",
	    },{
	        name: "停用/启用用户",
	    },{
	        name: "编辑用户",
	    },{
	        name: "删除用户",
	    }]
	},{
	    name: "资源管理",
	    open: true,
	    checked:true,
	    children: [{
	        name: "查看资源",
	    },{
	        name: "编辑资源",
	    },{
	        name: "删除资源",
	    },{
	        name: "新增资源",
	    },{
	        name: "下载音频资源",
	    }]
	}];
	//带复选框的树
	$(".ztree-check").each(function() {
		$.fn.zTree.init($(this), allSetting, allData);
	});

	$("body").on('change','.gb-permission-list input',function() {
		$(".gb-user-permission h3").html($(this).parents("li").find("em").html())
	});
</script>